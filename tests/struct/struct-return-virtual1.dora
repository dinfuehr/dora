//= vm-args "--gc=copy --disable-tlab --gc-stress"

fun main() {
    let x = Bar(42I).tpl1();
    std::forceCollect();
    assert(x.second.value == 17I);
}

struct Pair(first: Int32, second: Foo)

@open class Bar(let value: Int32) {
    @open fun tpl1(): Pair {
        assert(self.value == 42I);
        Pair(1I, Foo(17I))
    }
}

class Foo(let value: Int32)
