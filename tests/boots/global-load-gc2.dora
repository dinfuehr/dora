//= boots
//= vm-args --gc=copy --gc-stress
//= platform "arch == 'arm64'"

let g: Int64 = {
    std::forceCollect(); 12
};

fn main() {
    assert(getg(Foo(10)) == 22);
}

class Foo(value: Int64)

@optimizeImmediately fn getg(x: Foo): Int64 {
    let result = g;
    x.value + result
}
